<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document Repository</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{ --bg:#f7f9fc; --card:#fff; --text:#0f172a; --muted:#64748b; --border:#e5e7eb; --hover:#f1f5f9; --blue:#0d6efd; --danger:#ef4444; }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;color:var(--text)}
    header{position:sticky;top:0;z-index:5;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px;background:var(--bg);border-bottom:1px solid var(--border)}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{height:28px;width:28px;border-radius:6px;object-fit:cover}
    .title{margin:0;font-weight:800}
    .btn{appearance:none;border:1px solid var(--border);background:var(--card);padding:8px 10px;border-radius:10px;cursor:pointer}
    .btn:hover{background:var(--hover)}
    .btn.primary{background:var(--blue);color:#fff;border-color:transparent}
    .btn.danger{background:var(--danger);color:#fff;border-color:transparent}
    input,select{padding:8px 10px;border:1px solid var(--border);border-radius:8px}
    table{width:100%;border-collapse:separate;border-spacing:0}
    /* ✅ fixed sticky headers */
    thead th{
      position:sticky;
      top:0;
      background:var(--card);
      border-bottom:1px solid var(--border);
      padding:10px;
      text-align:left;
      font-weight:700;
      white-space:nowrap;
      z-index:2;
    }
    thead tr.filters th{
      position:sticky;
      top:42px; /* height of header row */
      background:#f8fafc;
      z-index:1;
    }
    thead tr.filters input, thead tr.filters select{width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:8px}
    tbody td{border-top:1px solid var(--border);padding:10px;vertical-align:top}
    th.sort{cursor:pointer;user-select:none}
    th.sort:after{content:" ⇵";color:#94a3b8;font-weight:400}
    th.sort.asc:after{content:" ↑";} th.sort.desc:after{content:" ↓";}
    .thumb{width:58px;height:44px;object-fit:cover;border-radius:5px;border:1px solid #e5e7eb;background:#f8fafc}
    .fileicon{display:inline-flex;align-items:center;gap:6px;padding:3px 6px;border:1px solid #e5e7eb;border-radius:6px;color:#334155;background:#f8fafc;font-size:12px}
    .fileicon svg{width:14px;height:14px}
    .wrap{padding:14px 16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .muted{color:var(--muted)}
    .pager{display:flex;gap:8px;align-items:center;margin-top:10px}
    .hidden{display:none}
    /* modal */
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:50;align-items:center;justify-content:center}
    .modal .box{background:#fff;border-radius:12px;border:1px solid var(--border);padding:16px;width:min(720px,94vw)}
    .box h3{margin:6px 0 12px}
    /* wrapper so sticky works inside scroll */
    .tablewrap{
      overflow:auto;
      border:1px solid var(--border);
      border-radius:12px;
      position:relative;
      max-height:70vh; /* optional: keeps header visible during scroll */
    }
  </style>
</head>
<body>
<header>
  <div class="brand">
    <img src="/android-chrome-512x512.png" onerror="this.src='logo.png'" alt="logo">
    <h1 class="title">Document Repository</h1>
  </div>
  <div class="row">
    <button class="btn" onclick="location.href='/'">Back to Dashboard</button>
    <button class="btn danger" onclick="logout()">Logout</button>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <div class="row" style="margin-bottom:8px">
      <input id="q" placeholder="Quick search…" style="min-width:260px">
      <button id="addBtn" class="btn primary hidden">+ Add Document</button>
      <button id="catBtn" class="btn hidden">Manage Categories</button>
      <span id="meta" class="muted"></span>
      <span id="status" class="muted" style="margin-left:auto"></span>
    </div>

    <!-- ✅ wrapped table -->
    <div class="tablewrap">
      <table id="grid">
        <thead id="thead">
          <tr>
            <th class="sort" data-k="serial">Serial #</th>
            <th class="sort" data-k="date">Date</th>
            <th class="sort" data-k="subject">Subject</th>
            <th class="sort" data-k="category">Category</th>
            <th class="sort" data-k="media">Media</th>
            <th class="sort" data-k="url">Link</th>
            <th>Actions</th>
          </tr>
          <tr class="filters">
            <th><input id="f_serial" placeholder="#"></th>
            <th><input id="f_date" placeholder="dd-mm-yyyy"></th>
            <th><input id="f_subject" placeholder="contains…"></th>
            <th><input id="f_category" placeholder="contains…"></th>
            <th><input id="f_media" placeholder="contains…"></th>
            <th><input id="f_url" placeholder="contains…"></th>
            <th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="pager">
      <button id="prevBtn" class="btn">Prev</button>
      <span id="pageInfo" class="muted">Page 1 / 1</span>
      <button id="nextBtn" class="btn">Next</button>
    </div>
  </div>
</div>

<!-- … keep your modal & script here, unchanged … -->

</body>
</html>
